add_namespace = ebf_economy_state_bank_event

# Monthly Income
country_event = {
	id = ebf_economy_state_bank_event.1
	title = ebf_economy_state_bank_event.1.t
	desc = ebf_economy_state_bank_event.1.d
	picture = GFX_report_event_soviet_soldiers
	
	is_triggered_only = yes
	hidden = yes

    immediate = {
		country_event = {
			id = ebf_economy_tax_event.5
		}
		country_event = {
			id = ebf_economy_resources_event.1
		}
		country_event = {
			id = ebf_economy_state_bank_event.4
		}
		set_variable = {
			ebf_economy_monthly_income = ebf_economy_combined_tax_amount
		}
		add_to_variable = {
			ebf_economy_monthly_income = ebf_economy_resources_trading_income
		}
		add_to_variable = {
			ebf_economy_monthly_income = ebf_economy_money_printing_income
		}
		
		
	}
}

# Loan Income Ratio
country_event = {
	id = ebf_economy_state_bank_event.2
	title = ebf_economy_state_bank_event.2.t
	desc = ebf_economy_state_bank_event.2.d
	picture = GFX_report_event_soviet_soldiers
	
	is_triggered_only = yes
	hidden = yes

    immediate = {
		set_variable = {
			ebf_economy_loan_income_ratio = ebf_economy_loans_amount
		}
		set_variable = {
			ebf_economy_yearly_income = ebf_economy_monthly_income
		}
		multiply_variable = {
			ebf_economy_yearly_income = 12
		}
		divide_variable = {
			ebf_economy_loan_income_ratio = ebf_economy_yearly_income
		}
		
	}
}


# Money Printing Amount
country_event = {
	id = ebf_economy_state_bank_event.3
	title = ebf_economy_state_bank_event.3.t
	desc = ebf_economy_state_bank_event.3.d
	picture = GFX_report_event_soviet_soldiers
	
	is_triggered_only = yes
	hidden = yes

    immediate = {
		set_variable = { ebf_economy_money_printing_amount = ebf_economy_money_printing_rate }
		add_to_variable = { ebf_economy_money_printing_amount = 1 }
		subtract_from_variable = { ebf_economy_money_printing_amount = ebf_economy_money_decay_rate }
		multiply_variable = { ebf_economy_money_printing_amount = ebf_economy_national_economy_money }
		subtract_from_variable = { ebf_economy_money_printing_amount = ebf_economy_national_economy_money }
    }
}

# Money Printing Income
country_event = {
	id = ebf_economy_state_bank_event.4
	title = ebf_economy_state_bank_event.4.t
	desc = ebf_economy_state_bank_event.4.d
	picture = GFX_report_event_soviet_soldiers
	
	is_triggered_only = yes
	hidden = yes

    immediate = {
		set_temp_variable = { ebf_economy_money_printing_income_temp = ebf_economy_money_decay_rate }
		add_to_temp_variable = { ebf_economy_money_printing_income_temp = 1 }
		multiply_temp_variable = { ebf_economy_money_printing_income_temp = ebf_economy_national_economy_money }

		set_variable = { ebf_economy_money_printing_income = ebf_economy_money_printing_amount }
		subtract_from_variable = { ebf_economy_money_printing_income = ebf_economy_money_printing_income_temp }
		subtract_from_variable = { ebf_economy_money_printing_income = ebf_economy_national_economy_money }
    }
}

# Money Relative Priniting Rate
country_event = {
	id = ebf_economy_state_bank_event.5
	title = ebf_economy_state_bank_event.5.t
	desc = ebf_economy_state_bank_event.5.d
	picture = GFX_report_event_soviet_soldiers
	
	is_triggered_only = yes
	hidden = yes

    immediate = {
		set_variable = { ebf_economy_money_relative_printing_rate = ebf_economy_money_printing_rate }
		divide_variable = { ebf_economy_money_relative_printing_rate = ebf_economy_money_decay_rate }
    }
}

# National Economy Money
country_event = {
	id = ebf_economy_state_bank_event.6
	title = ebf_economy_state_bank_event.6.t
	desc = ebf_economy_state_bank_event.6.d
	picture = GFX_report_event_soviet_soldiers
	
	is_triggered_only = yes
	hidden = yes

    immediate = {
		set_variable = { ebf_economy_national_economy_money = modifier@num_of_civilian_factories }
		multiply_variable = { ebf_economy_national_economy_money = ebf_economy_national_economy_civilian_factory_money }

		set_temp_variable = { ebf_economy_national_economy_money_temp = ebf_economy_population }
		subtract_from_temp_variable = { ebf_economy_national_economy_money_temp = ebf_economy_rich }
		multiply_temp_variable = { ebf_economy_national_economy_money_temp = ebf_economy_national_economy_pop_money }

		add_to_variable = { ebf_economy_national_economy_money = ebf_economy_national_economy_money_temp }

		set_temp_variable = { ebf_economy_national_economy_money_temp = ebf_economy_rich }
		multiply_temp_variable = { ebf_economy_national_economy_money_temp = ebf_economy_national_economy_rich_pop_money }

		add_to_variable = { ebf_economy_national_economy_money = ebf_economy_national_economy_money_temp }
    }
}

# Loan Intrest Rate
country_event = {
	id = ebf_economy_state_bank_event.7
	title = ebf_economy_state_bank_event.7.t
	desc = ebf_economy_state_bank_event.7.d
	picture = GFX_report_event_soviet_soldiers
	
	is_triggered_only = yes
	hidden = yes

    immediate = {
		set_variable = { ebf_economy_loan_intrest_rate = -0.1 }
		multiply_variable = { ebf_economy_loan_intrest_rate = ebf_economy_loan_income_ratio } 
		add_to_variable = { ebf_economy_loan_intrest_rate = 10 }

		clamp_variable = {
			var = ebf_economy_loan_intrest_rate
			min = 1
			max = 10
		}
    }
}

# One Time Repay Penalty
country_event = {
	id = ebf_economy_state_bank_event.8
	title = ebf_economy_state_bank_event.8.t
	desc = ebf_economy_state_bank_event.8.d
	picture = GFX_report_event_soviet_soldiers
	
	is_triggered_only = yes
	hidden = yes

    immediate = {
		set_variable = { ebf_economy_loan_one_time_repay_penalty = ebf_economy_loan_one_time_repay_amount }
		multiply_variable = { ebf_economy_loan_one_time_repay_penalty = ebf_economy_loan_income_ratio } 
		divide_variable = { ebf_economy_loan_one_time_repay_penalty = ebf_economy_loans_amount }
		multiply_variable = { ebf_economy_loan_one_time_repay_penalty = ebf_economy_loan_one_time_repay_amount } 
    }
}

# One Time Repay Combined
country_event = {
	id = ebf_economy_state_bank_event.9
	title = ebf_economy_state_bank_event.9.t
	desc = ebf_economy_state_bank_event.9.d
	picture = GFX_report_event_soviet_soldiers
	
	is_triggered_only = yes
	hidden = yes

    immediate = {
		set_variable = { ebf_economy_loan_one_time_repay_combined = ebf_economy_loan_one_time_repay_amount }
		add_to_variable = { ebf_economy_loan_one_time_repay_combined = ebf_economy_loan_one_time_repay_penalty }
		multiply_variable = { ebf_economy_loan_one_time_repay_combined = ebf_economy_inflation }
    }
}
